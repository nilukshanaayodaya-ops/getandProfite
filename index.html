<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GET AND PROFIT | 2026 Sri Lankan Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@500&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@700&family=Abhaya+Libre:wght@800&display=swap');
        
        :root {
            --sl-maroon: #800000;
            --sl-gold: #ffbe29;
            --sl-orange: #ff8c00;
            --sl-green: #006400;
            --bg-dark: #08090b;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: #f1f5f9;
            overflow-x: hidden;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(128, 0, 0, 0.3) 0%, transparent 60%),
                radial-gradient(circle at 100% 100%, rgba(0, 100, 0, 0.1) 0%, transparent 50%),
                repeating-linear-gradient(45deg, rgba(255, 190, 41, 0.02) 0px, rgba(255, 190, 41, 0.02) 1px, transparent 1px, transparent 20px);
            position: relative;
            padding-top: 40px;
        }

        /* Side Liyawela Borders */
        .liyawela-side {
            position: fixed;
            top: 0;
            bottom: 0;
            width: 40px;
            z-index: 40;
            background-image: 
                radial-gradient(circle at 0% 50%, transparent 10px, #ffbe29 11px, #ffbe29 13px, transparent 14px),
                radial-gradient(circle at 100% 50%, transparent 10px, #ffbe29 11px, #ffbe29 13px, transparent 14px);
            background-size: 40px 60px;
            opacity: 0.15;
            pointer-events: none;
        }
        .liyawela-left { left: 0; border-right: 1px solid rgba(255, 190, 41, 0.1); }
        .liyawela-right { right: 0; border-left: 1px solid rgba(255, 190, 41, 0.1); }

        /* Gok Kola Decoration */
        .gok-kola-strip {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 30px;
            z-index: 100;
            background: 
                linear-gradient(135deg, #6bbf44 25%, transparent 25%) -15px 0,
                linear-gradient(225deg, #6bbf44 25%, transparent 25%) -15px 0,
                linear-gradient(315deg, #4a8028 25%, transparent 25%),
                linear-gradient(45deg, #4a8028 25%, transparent 25%);
            background-size: 30px 30px;
            background-color: #2d5a12;
            box-shadow: 0 4px 15px rgba(0,0,0,0.6);
            border-bottom: 3px solid var(--sl-gold);
        }

        /* Erabadu Flower Falling Animation */
        .erabadu {
            position: fixed;
            top: -10%;
            color: #ef4444;
            font-size: 20px;
            opacity: 0.6;
            z-index: 1;
            animation: fall linear infinite;
        }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        #fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.5;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Litha Card Special Style */
        .litha-card {
            background: linear-gradient(145deg, rgba(255, 241, 200, 0.05), rgba(255, 190, 41, 0.02));
            border: 1px solid rgba(255, 190, 41, 0.2);
            position: relative;
        }
        .litha-card::before {
            content: '';
            position: absolute;
            top: 4px; left: 4px; right: 4px; bottom: 4px;
            border: 1px dashed rgba(255, 190, 41, 0.2);
            border-radius: 1.5rem;
            pointer-events: none;
        }

        .glass-card:hover {
            border-color: var(--sl-gold);
            background: rgba(255, 255, 255, 0.04);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(128, 0, 0, 0.2);
        }

        .ny-text {
            font-family: 'Mountains of Christmas', cursive;
            background: linear-gradient(to bottom, var(--sl-gold), #fb923c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(255, 190, 41, 0.4));
        }

        .sinhala-wish {
            font-family: 'Abhaya Libre', serif;
            color: var(--sl-gold);
            text-shadow: 0 0 20px rgba(255, 190, 41, 0.5);
            letter-spacing: 1px;
        }

        @keyframes flag-wave {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-5px) rotate(2deg); }
            75% { transform: translateY(5px) rotate(-2deg); }
        }

        .flag-icon {
            display: inline-block;
            animation: flag-wave 3s infinite ease-in-out;
            filter: drop-shadow(0 0 8px rgba(255, 190, 41, 0.5));
        }

        @keyframes flicker {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            25% { transform: scale(1.1) rotate(-2deg); opacity: 1; }
            50% { transform: scale(0.95) rotate(2deg); opacity: 0.8; }
            75% { transform: scale(1.05) rotate(-1deg); opacity: 1; }
        }

        .pahana-flame {
            transform-origin: bottom center;
            animation: flicker 0.8s infinite ease-in-out;
        }

        @keyframes koha-sing {
            0%, 100% { transform: rotate(0deg); }
            10% { transform: rotate(-15deg); }
            20% { transform: rotate(0deg); }
        }
        
        .koha-icon {
            display: inline-block;
            animation: koha-sing 5s infinite;
            transform-origin: bottom center;
        }

        /* Sun Effect behind title */
        .sun-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255, 190, 41, 0.15) 0%, transparent 70%);
            z-index: -1;
            pointer-events: none;
            animation: sun-pulse 4s infinite ease-in-out;
        }
        @keyframes sun-pulse {
            0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.2); }
        }

        .sl-flag-strip {
            height: 6px;
            background: linear-gradient(to right, 
                var(--sl-maroon) 0%, var(--sl-maroon) 25%, 
                var(--sl-gold) 25%, var(--sl-gold) 50%, 
                var(--sl-green) 50%, var(--sl-green) 75%, 
                var(--sl-orange) 75%, var(--sl-orange) 100%);
        }

        .countdown-container {
            background: rgba(128, 0, 0, 0.2);
            border: 1px solid rgba(255, 190, 41, 0.3);
            box-shadow: 0 0 30px rgba(128, 0, 0, 0.25);
            backdrop-filter: blur(10px);
        }

        .btn-tab.active {
            background: linear-gradient(135deg, var(--sl-gold), #d97706);
            color: #2a0a0a;
            font-weight: 800;
            box-shadow: 0 4px 20px rgba(255, 190, 41, 0.4);
            border: none;
        }

        .check-card.checked {
            background: rgba(0, 100, 0, 0.2);
            border-color: var(--sl-green);
            box-shadow: inset 0 0 20px rgba(0, 100, 0, 0.1);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--sl-gold); border-radius: 10px; }

        .lion-bg {
            position: absolute;
            right: -30px;
            bottom: -20px;
            opacity: 0.1;
            font-size: 140px;
            transform: rotate(-15deg);
            pointer-events: none;
            color: var(--sl-gold);
        }

        /* Chat Styles */
        .chat-container { height: 500px; display: flex; flex-direction: column; }
        .messages-area { flex-grow: 1; overflow-y: auto; padding-right: 10px; }
        .ai-bubble { background: rgba(255, 190, 41, 0.08); border: 1px solid rgba(255, 190, 41, 0.2); border-radius: 20px 20px 20px 0; }
        .user-bubble { background: rgba(128, 0, 0, 0.2); border: 1px solid rgba(128, 0, 0, 0.3); border-radius: 20px 20px 0 20px; }
        .typing-dot { width: 6px; height: 6px; background: var(--sl-gold); border-radius: 50%; animation: typing 1s infinite ease-in-out; }
        @keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
    </style>
</head>
<body class="antialiased p-4 lg:p-8">

    <!-- Decorations -->
    <div class="gok-kola-strip"></div>
    <div class="liyawela-side liyawela-left"></div>
    <div class="liyawela-side liyawela-right"></div>
    <div id="erabadu-container"></div>
    <canvas id="fireworks"></canvas>

    <div class="max-w-[1400px] mx-auto relative z-10 mt-8">
        <!-- New Year Header -->
        <div class="text-center mb-14 relative">
            <div class="sun-glow"></div>
            
            <!-- Traditional Pahana & Title Area -->
            <div class="flex flex-col items-center justify-center mb-6">
                <div class="flex items-end gap-4">
                    <!-- Bulath Atha Left -->
                    <svg width="40" height="40" viewBox="0 0 100 100" class="transform -rotate-12 opacity-80 hover:opacity-100 transition-opacity">
                        <path d="M50 85 Q20 50 20 25 Q20 0 50 15 Q80 0 80 25 Q80 50 50 85" fill="#4a8028" stroke="#365e1d" stroke-width="2"/>
                        <path d="M50 85 Q60 50 50 15" fill="none" stroke="#365e1d" stroke-width="1"/>
                        <path d="M55 80 Q25 45 25 20 Q25 -5 55 10 Q85 -5 85 20 Q85 45 55 80" fill="#5c9c32" stroke="#365e1d" stroke-width="2" transform="translate(5, -5)"/>
                        <path d="M55 80 Q65 45 55 10" fill="none" stroke="#365e1d" stroke-width="1" transform="translate(5, -5)"/>
                    </svg>

                    <!-- SVG Pahana -->
                    <svg width="70" height="90" viewBox="0 0 100 140" class="mb-2 drop-shadow-[0_0_20px_rgba(255,190,41,0.6)]">
                        <path d="M20 120 Q50 140 80 120 L85 130 H15 Z" fill="#b45309" />
                        <rect x="45" y="60" width="10" height="60" fill="#d97706" />
                        <path d="M10 60 Q50 90 90 60 L80 40 Q50 70 20 40 Z" fill="#b45309" />
                        <ellipse cx="50" cy="45" rx="35" ry="10" fill="#f59e0b" opacity="0.8" />
                        <path d="M48 45 L48 25 L52 25 L52 45 Z" fill="#3f3f46" />
                        <path class="pahana-flame" d="M50 25 Q60 15 50 0 Q40 15 50 25" fill="#fbbf24" filter="drop-shadow(0 0 5px #f59e0b)" />
                    </svg>

                    <!-- Bulath Atha Right -->
                    <svg width="40" height="40" viewBox="0 0 100 100" class="transform rotate-12 opacity-80 hover:opacity-100 transition-opacity">
                        <path d="M50 85 Q20 50 20 25 Q20 0 50 15 Q80 0 80 25 Q80 50 50 85" fill="#4a8028" stroke="#365e1d" stroke-width="2"/>
                        <path d="M50 85 Q60 50 50 15" fill="none" stroke="#365e1d" stroke-width="1"/>
                        <path d="M55 80 Q25 45 25 20 Q25 -5 55 10 Q85 -5 85 20 Q85 45 55 80" fill="#5c9c32" stroke="#365e1d" stroke-width="2" transform="translate(5, -5)"/>
                        <path d="M55 80 Q65 45 55 10" fill="none" stroke="#365e1d" stroke-width="1" transform="translate(5, -5)"/>
                    </svg>
                </div>

                <h2 class="ny-text text-5xl md:text-7xl animate-pulse tracking-wide mt-2">
                    Happy New Year 2026!
                </h2>
                <div class="w-48 h-1 bg-gradient-to-r from-transparent via-amber-500 to-transparent mt-3 opacity-60"></div>
            </div>

            <div class="flex items-center justify-center gap-6 mb-8">
                <div class="flag-icon hidden md:block opacity-90">
                    <svg width="40" height="26" viewBox="0 0 600 400">
                        <rect width="600" height="400" fill="#ffbe29"/>
                        <rect x="20" y="20" width="100" height="360" fill="#ff8c00"/>
                        <rect x="130" y="20" width="100" height="360" fill="#006400"/>
                        <rect x="240" y="20" width="340" height="360" fill="#800000"/>
                    </svg>
                </div>
                
                <div class="sinhala-wish text-3xl md:text-5xl text-amber-400 drop-shadow-md">
                    ‡∑É‡∑î‡∂∂ ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂Ö‡∑Ä‡∑î‡∂ª‡∑î‡∂Ø‡∑ä‡∂Ø‡∂ö‡∑ä ‡∑Ä‡∑ö‡∑Ä‡∑è!
                </div>

                <div class="flag-icon hidden md:block opacity-90">
                    <svg width="40" height="26" viewBox="0 0 600 400">
                        <rect width="600" height="400" fill="#ffbe29"/>
                        <rect x="20" y="20" width="100" height="360" fill="#ff8c00"/>
                        <rect x="130" y="20" width="100" height="360" fill="#006400"/>
                        <rect x="240" y="20" width="340" height="360" fill="#800000"/>
                    </svg>
                </div>
            </div>
            
            <div class="inline-flex gap-4 md:gap-8 countdown-container px-10 py-5 rounded-full backdrop-blur-md border-amber-500/40">
                <div class="flex flex-col items-center">
                    <span id="days" class="text-2xl md:text-4xl font-black text-white font-mono leading-none">00</span>
                    <span class="text-[9px] uppercase font-bold text-amber-500/80 tracking-[0.2em] mt-1">Days</span>
                </div>
                <div class="w-px bg-white/20 h-10 self-center"></div>
                <div class="flex flex-col items-center">
                    <span id="hours" class="text-2xl md:text-4xl font-black text-white font-mono leading-none">00</span>
                    <span class="text-[9px] uppercase font-bold text-amber-500/80 tracking-[0.2em] mt-1">Hours</span>
                </div>
                <div class="w-px bg-white/20 h-10 self-center"></div>
                <div class="flex flex-col items-center">
                    <span id="minutes" class="text-2xl md:text-4xl font-black text-white font-mono leading-none">00</span>
                    <span class="text-[9px] uppercase font-bold text-amber-500/80 tracking-[0.2em] mt-1">Mins</span>
                </div>
                <div class="w-px bg-white/20 h-10 self-center"></div>
                <div class="flex flex-col items-center">
                    <span id="seconds" class="text-2xl md:text-4xl font-black text-amber-400 font-mono leading-none">00</span>
                    <span class="text-[9px] uppercase font-bold text-amber-500/80 tracking-[0.2em] mt-1">Secs</span>
                </div>
            </div>
        </div>

        <header class="flex flex-col lg:flex-row justify-between items-center mb-12 gap-8 px-4 relative z-20">
            <div class="text-center lg:text-left relative group">
                <div class="absolute -top-8 left-12 text-3xl koha-icon opacity-90 group-hover:opacity-100 transition-opacity filter drop-shadow-lg" title="Avurudu Koha">
                    üê¶ <span class="text-[11px] text-amber-500 font-bold absolute -right-10 top-0 bg-black/50 px-2 py-0.5 rounded-full">Kooo!</span>
                </div>
                
                <h1 class="text-6xl md:text-8xl font-black tracking-tighter text-white leading-none drop-shadow-2xl">
                    GET AND <span class="text-amber-500 relative">PROFIT
                        <span class="absolute -top-4 -right-6 text-white text-2xl animate-pulse">‚ú®</span>
                    </span>
                </h1>
                <div class="flex items-center justify-center lg:justify-start gap-4 mt-5">
                    <div class="flex gap-1.5 shadow-lg">
                        <div class="w-5 h-5 bg-[#800000] rounded-sm"></div>
                        <div class="w-5 h-5 bg-[#ffbe29] rounded-sm"></div>
                        <div class="w-5 h-5 bg-[#006400] rounded-sm"></div>
                        <div class="w-5 h-5 bg-[#ff8c00] rounded-sm"></div>
                    </div>
                    <p class="text-[12px] font-bold text-slate-400 tracking-[0.4em] uppercase">2026 Sri Lankan Spirit Edition</p>
                </div>
            </div>

            <div class="flex items-center gap-2 bg-black/60 p-3 rounded-2xl border border-white/10 backdrop-blur-xl shadow-2xl">
                <div class="px-5 py-2 text-center">
                    <span class="block text-[9px] text-slate-400 uppercase font-bold mb-1">London</span>
                    <span id="clock-london" class="text-sm font-mono font-bold text-white tracking-widest">--:--:--</span>
                </div>
                <div class="px-5 py-2 text-center border-l border-white/10">
                    <span class="block text-[9px] text-slate-400 uppercase font-bold mb-1">New York</span>
                    <span id="clock-newyork" class="text-sm font-mono font-bold text-white tracking-widest">--:--:--</span>
                </div>
                <div class="px-5 py-2 text-center border-l border-white/10 bg-amber-500/20 rounded-xl border border-amber-500/20">
                    <span class="block text-[9px] text-amber-400 uppercase font-bold mb-1">Colombo</span>
                    <span id="clock-colombo" class="text-sm font-mono font-bold text-amber-300 tracking-widest">--:--:--</span>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <aside class="lg:col-span-3 space-y-6">
                <!-- Trading Litha (Styled like traditional Almanac) -->
                <div class="litha-card p-8 rounded-[2rem] relative overflow-hidden shadow-2xl">
                    <div class="lion-bg">
                        <i class="fa-solid fa-shield-cat"></i>
                    </div>
                    <h4 class="text-[12px] font-black text-amber-600 uppercase tracking-widest mb-6 flex items-center gap-2">
                        <i class="fa-solid fa-scroll"></i> Trading Litha
                    </h4>
                    <div class="space-y-6 relative z-10">
                        <div>
                            <p class="text-[10px] text-amber-700/80 font-bold uppercase mb-1">Iwasilla (Patience)</p>
                            <p class="text-[13px] text-slate-300 italic leading-relaxed font-semibold">"Hoda setup ekak enakal iwasala inna. Hoda nekathak enakal inna wagema."</p>
                        </div>
                        <div>
                            <p class="text-[10px] text-amber-700/80 font-bold uppercase mb-1">Vinaya (Discipline)</p>
                            <p class="text-[13px] text-slate-300 italic leading-relaxed font-semibold">"Rule ekata pita kisima trade ekak danna epa."</p>
                        </div>
                    </div>
                    <!-- Decorative pattern at bottom -->
                    <div class="absolute bottom-0 left-0 w-full h-2 bg-gradient-to-r from-amber-600 via-amber-400 to-amber-600 opacity-30"></div>
                </div>

                <div class="glass-card p-8 rounded-[2rem]">
                    <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Market Sessions</h4>
                    <div id="sessions-container" class="space-y-3"></div>
                </div>

                <div class="px-6 py-4 rounded-2xl bg-white/5 border border-white/5 text-center lg:text-left">
                    <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest leading-relaxed">
                        Jaya Siri Mangalam <br>
                        <span class="text-amber-500/50">Ayodaya & Deshitha</span>
                    </p>
                </div>
            </aside>

            <main class="lg:col-span-9 space-y-6">
                <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
                    <div id="tabs-container" class="flex flex-wrap justify-center p-1.5 bg-black/40 rounded-2xl border border-white/10 backdrop-blur-md"></div>
                    <button onclick="resetChecks()" class="group flex items-center gap-2 px-6 py-3 rounded-xl border border-rose-500/20 bg-rose-500/5 text-[10px] font-bold uppercase tracking-wider text-rose-400 hover:bg-rose-500 hover:text-white transition-all">
                        <i class="fa-solid fa-rotate-left transition-transform group-hover:-rotate-180"></i> Clear Litha
                    </button>
                </div>

                <div id="main-content-panel" class="bg-[#0c0e12] rounded-[3rem] border border-white/10 shadow-2xl overflow-hidden relative">
                    <!-- Progress Bar (Hidden for AI Tab) -->
                    <div id="progress-container" class="h-2 w-full bg-white/5">
                        <div id="progress-bar" class="h-full bg-gradient-to-right from-amber-700 via-amber-500 to-yellow-400 transition-all duration-700 ease-out shadow-[0_0_15px_rgba(255,190,41,0.5)]" style="width: 0%"></div>
                    </div>

                    <div class="p-8 lg:p-14 relative z-10">
                        <div id="checklist-view">
                            <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                                <div>
                                    <h2 id="active-title" class="text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-3">--</h2>
                                    <p class="text-sm text-slate-500 max-w-md">Ensure all conditions meet the auspicious standards for execution.</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-[10px] font-bold text-slate-600 uppercase tracking-widest mb-1 block">Readiness</span>
                                    <div id="progress-text" class="text-6xl font-black text-amber-500 font-mono drop-shadow-[0_0_10px_rgba(255,190,41,0.3)]">0%</div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-16">
                                <div>
                                    <h3 class="text-[11px] font-black text-amber-500/70 uppercase tracking-[0.4em] mb-8 flex items-center gap-4">
                                        <i class="fa-solid fa-microchip"></i> Technical Logic
                                    </h3>
                                    <div id="tech-items" class="space-y-4"></div>
                                </div>
                                <div>
                                    <h3 class="text-[11px] font-black text-rose-500/70 uppercase tracking-[0.4em] mb-8 flex items-center gap-4">
                                        <i class="fa-solid fa-shield-halved"></i> Risk Protocol
                                    </h3>
                                    <div id="risk-items" class="space-y-4"></div>

                                    <div id="verdict-box" class="mt-10 p-8 rounded-3xl border border-white/5 bg-white/[0.01] transition-all">
                                        <p id="verdict-text" class="text-[13px] font-semibold text-slate-500 leading-relaxed italic">
                                            Awaiting verification...
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <button id="execute-btn" disabled class="w-full mt-12 py-10 rounded-[2.5rem] font-black text-[16px] tracking-[1em] uppercase transition-all duration-500 bg-white/5 text-slate-700 cursor-not-allowed border border-white/10 relative overflow-hidden group">
                                <span class="relative z-10">Protocol Pending</span>
                                <div class="absolute inset-0 bg-gradient-to-r from-amber-600 to-amber-500 opacity-0 group-hover:opacity-10 transition-opacity"></div>
                            </button>
                        </div>

                        <!-- AI Assistant View (Initially Hidden) -->
                        <div id="ai-view" class="hidden">
                            <div class="flex items-center justify-between mb-8">
                                <div>
                                    <h2 class="text-4xl font-black text-white uppercase tracking-tight mb-2">Avurudu Assistant</h2>
                                    <p class="text-sm text-slate-500">Ask about Trading, Psychology or 2026 Goals.</p>
                                </div>
                                <div class="flex gap-2 items-center bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20">
                                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                                    <span class="text-[10px] font-bold text-green-500 uppercase tracking-widest">Online</span>
                                </div>
                            </div>

                            <div class="chat-container">
                                <div id="messages-area" class="messages-area space-y-4 mb-6 pr-2">
                                    <div class="ai-bubble p-5 max-w-[85%]">
                                        <p class="text-sm text-slate-300 leading-relaxed">
                                            <span class="text-amber-400 font-bold block mb-1">Ayubowan! üôè</span>
                                            Subha Aluth Avuruddak Wewa! 2026 trading plans gana mawa onama deyak ahanna. Mama kohomada help karanna oni?
                                        </p>
                                    </div>
                                </div>
                                
                                <div id="ai-loading" class="hidden flex items-center gap-2 mb-4 px-4">
                                    <div class="typing-dot"></div>
                                    <div class="typing-dot" style="animation-delay: 0.2s"></div>
                                    <div class="typing-dot" style="animation-delay: 0.4s"></div>
                                </div>

                                <div class="relative">
                                    <input type="text" id="ai-input" placeholder="Oyata dana prashnaya methana type karanna..." class="w-full bg-white/5 border border-white/10 rounded-2xl py-5 px-6 text-sm text-white focus:outline-none focus:border-amber-500/50 transition-all pr-16 shadow-inner">
                                    <button onclick="askAI()" class="absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-xl bg-amber-500 text-black flex items-center justify-center hover:bg-amber-400 transition-all shadow-[0_0_15px_rgba(255,190,41,0.4)]">
                                        <i class="fa-solid fa-paper-plane text-xs"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const setups = {
            hsTab: { title: "h & s Divergence", items: ["Divergence Check", "Daily & 4h Trend Alignment", "H&S Pattern Confirmation", "Neckline Break & Retest", "1h or 4h Structure OK", "1h or 4h SOS", "SOS Retest", "Candle Engulfing Break"], risk: ["Risk 1-2% Max", "Min 1:2 R:R Ratio", "News Calendar Clean"] },
            divTab: { title: "Normal Divergence", items: ["Divergence Check", "Trend Alignment", "AOI Break & Retest", "Structure Validation", "Sign of Strength", "SOS Retest", "Candle Confirmation"], risk: ["Risk 1-2% Max", "Min 1:2 R:R Ratio", "News Calendar Check"] },
            mainNormalTab: { title: "Main Setup", items: ["TF Trend Alignment", "No Divergence", "Identify Major AOI", "AOI Break & Retest", "2nd AOI Validation", "1h Structure (3 Candle Rule)", "1h SOS Confirmation", "SOS Retest"], risk: ["Risk 1-2% Max", "Min 1:2 R:R Ratio", "Economic Calendar Check"] },
            aiTab: { title: "AI Assistant", isAI: true }
        };

        let activeTab = 'hsTab';
        let checkedItems = {};

        // Gemini AI Config
        const apiKey = "";
        const systemPrompt = "You are a professional trading assistant and Sri Lankan mentor for 2026. You speak friendly and professional. Use a mix of English and Sinhala (Singlish) when answering to make it more personal. Provide short, concise advice on trading psychology and setups based on the user's checklist. Always wish 'Subha Aluth Avuruddak Wewa' in the first message.";

        async function askAI() {
            const input = document.getElementById('ai-input');
            const text = input.value.trim();
            if (!text) return;

            addMessage(text, 'user');
            input.value = '';
            document.getElementById('ai-loading').classList.remove('hidden');

            let retries = 5;
            let delay = 1000;
            let success = false;

            while (retries > 0 && !success) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: text }] }],
                            systemInstruction: { parts: [{ text: systemPrompt }] }
                        })
                    });

                    const result = await response.json();
                    const aiResponse = result.candidates?.[0]?.content?.parts?.[0]?.text;
                    
                    if (aiResponse) {
                        addMessage(aiResponse, 'ai');
                        success = true;
                    } else {
                        throw new Error('No response');
                    }
                } catch (error) {
                    retries--;
                    if (retries === 0) {
                        addMessage("Mata dan help karanna amarui. Connection eka check karanna.", 'ai');
                    } else {
                        await new Promise(r => setTimeout(r, delay));
                        delay *= 2;
                    }
                }
            }
            document.getElementById('ai-loading').classList.add('hidden');
        }

        function addMessage(text, role) {
            const area = document.getElementById('messages-area');
            const div = document.createElement('div');
            div.className = `${role === 'ai' ? 'ai-bubble' : 'user-bubble ml-auto'} p-4 max-w-[80%] animate-in fade-in slide-in-from-bottom-2`;
            div.innerHTML = `<p class="text-sm ${role === 'ai' ? 'text-slate-300' : 'text-white'}">${text}</p>`;
            area.appendChild(div);
            area.scrollTop = area.scrollHeight;
        }

        function toggleItem(tab, idx) {
            const id = `${tab}-${idx}`;
            checkedItems[id] = !checkedItems[id];
            render();
        }

        function resetChecks() {
            checkedItems = {};
            render();
        }

        function render() {
            const tabs = document.getElementById('tabs-container');
            tabs.innerHTML = Object.entries(setups).map(([k, v]) => `
                <button onclick="activeTab='${k}'; render()" class="btn-tab px-6 lg:px-8 py-3 m-1 rounded-xl text-[10px] font-bold uppercase tracking-widest transition-all ${activeTab === k ? 'active' : 'text-slate-500 hover:text-slate-300'}">
                    ${v.title}
                </button>
            `).join('');

            const s = setups[activeTab];
            const checklistView = document.getElementById('checklist-view');
            const aiView = document.getElementById('ai-view');
            const progressContainer = document.getElementById('progress-container');

            if (s.isAI) {
                checklistView.classList.add('hidden');
                aiView.classList.remove('hidden');
                progressContainer.classList.add('invisible');
            } else {
                checklistView.classList.remove('hidden');
                aiView.classList.add('hidden');
                progressContainer.classList.remove('invisible');
                
                document.getElementById('active-title').innerText = s.title;
                document.getElementById('tech-items').innerHTML = s.items.map((it, i) => renderCard(it, activeTab, i)).join('');
                document.getElementById('risk-items').innerHTML = s.risk.map((it, i) => renderCard(it, activeTab, s.items.length + i)).join('');

                const total = s.items.length + s.risk.length;
                const done = [...s.items, ...s.risk].filter((_, i) => checkedItems[`${activeTab}-${i}`]).length;
                const prog = Math.round((done / total) * 100);

                document.getElementById('progress-bar').style.width = `${prog}%`;
                document.getElementById('progress-text').innerText = `${prog}%`;

                const btn = document.getElementById('execute-btn');
                const vBox = document.getElementById('verdict-box');
                const vTxt = document.getElementById('verdict-text');

                if (prog === 100) {
                    btn.disabled = false;
                    btn.className = "w-full mt-12 py-10 rounded-[2.5rem] font-black text-[16px] tracking-[1em] uppercase transition-all duration-500 ready-active cursor-pointer shadow-[0_0_30px_rgba(255,190,41,0.4)] hover:scale-[1.01]";
                    btn.innerHTML = `Execute Protocol <i class="fa-solid fa-fire text-amber-900 ml-2"></i>`;
                    vBox.className = "mt-10 p-8 rounded-3xl border border-amber-500/40 bg-amber-500/10";
                    vTxt.innerHTML = `<span class="text-amber-400 font-bold not-italic">Jaya Wewa!</span> Aswannu nelaaganna kaalaya hari. Market conditions perfect.`;
                    vTxt.style.color = "#ffbe29";
                } else {
                    btn.disabled = true;
                    btn.className = "w-full mt-12 py-10 rounded-[2.5rem] font-black text-[16px] tracking-[1em] uppercase transition-all duration-500 bg-white/5 text-slate-700 border border-white/10 cursor-not-allowed";
                    btn.innerText = "Protocol Pending";
                    vBox.className = "mt-10 p-8 rounded-3xl border border-white/5 bg-white/[0.01]";
                    vTxt.innerText = "System standby... awaiting manual verification of all parameters.";
                    vTxt.style.color = "#64748b";
                }
            }
        }

        function renderCard(label, tab, idx) {
            const checked = !!checkedItems[`${tab}-${idx}`];
            return `
                <div onclick="toggleItem('${tab}', ${idx})" class="check-card flex items-center justify-between p-5 rounded-2xl border border-white/5 bg-white/[0.01] cursor-pointer hover:border-amber-500/30 transition-all group ${checked ? 'checked' : ''}">
                    <div class="flex items-center gap-5">
                        <div class="w-6 h-6 rounded-md border-2 transition-all flex items-center justify-center ${checked ? 'bg-amber-500 border-amber-500 scale-110 shadow-[0_0_10px_rgba(255,190,41,0.5)]' : 'border-white/10 group-hover:border-amber-500/50'}">
                            ${checked ? '<i class="fa-solid fa-check text-[12px] text-black font-black"></i>' : ''}
                        </div>
                        <span class="text-[15px] font-bold tracking-tight ${checked ? 'text-white' : 'text-slate-400 group-hover:text-slate-300'}">${label}</span>
                    </div>
                </div>
            `;
        }

        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        class Particle {
            constructor(x, y, color) {
                this.x = x; this.y = y; this.color = color;
                this.velocity = { x: (Math.random() - 0.5) * 10, y: (Math.random() - 0.5) * 10 };
                this.alpha = 1; this.friction = 0.96;
            }
            draw() { ctx.globalAlpha = this.alpha; ctx.beginPath(); ctx.arc(this.x, this.y, 2, 0, Math.PI * 2); ctx.fillStyle = this.color; ctx.fill(); }
            update() { this.velocity.x *= this.friction; this.velocity.y *= this.friction; this.x += this.velocity.x; this.y += this.velocity.y; this.alpha -= 0.008; }
        }
        function createFirework() {
            const x = Math.random() * canvas.width; const y = Math.random() * canvas.height * 0.4;
            const colors = ['#ffbe29', '#800000', '#006400', '#ff8c00', '#ffffff'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < 40; i++) particles.push(new Particle(x, y, color));
        }
        function animateFireworks() {
            ctx.fillStyle = 'rgba(8, 9, 11, 0.15)'; ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach((p, i) => { if (p.alpha > 0) { p.update(); p.draw(); } else particles.splice(i, 1); });
            if (Math.random() < 0.04) createFirework();
            requestAnimationFrame(animateFireworks);
        }

        // Add Erabadu flowers
        function createErabadu() {
            const container = document.getElementById('erabadu-container');
            const flower = document.createElement('div');
            flower.className = 'erabadu fa-solid fa-clover';
            flower.style.left = Math.random() * 100 + 'vw';
            flower.style.animationDuration = Math.random() * 5 + 5 + 's';
            flower.style.fontSize = Math.random() * 20 + 10 + 'px';
            container.appendChild(flower);
            setTimeout(() => flower.remove(), 10000);
        }

        function updateCountdown() {
            const now = new Date().getTime();
            const target = new Date("Jan 1, 2026 00:00:00").getTime();
            const gap = target - now; if (gap < 0) return;
            const second = 1000, minute = second * 60, hour = minute * 60, day = hour * 24;
            document.getElementById('days').innerText = String(Math.floor(gap / day)).padStart(2, '0');
            document.getElementById('hours').innerText = String(Math.floor((gap % day) / hour)).padStart(2, '0');
            document.getElementById('minutes').innerText = String(Math.floor((gap % hour) / minute)).padStart(2, '0');
            document.getElementById('seconds').innerText = String(Math.floor((gap % minute) / second)).padStart(2, '0');
        }

        function updateClocks() {
            const opt = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            document.getElementById('clock-london').innerText = new Date().toLocaleTimeString('en-GB', { ...opt, timeZone: 'Europe/London' });
            document.getElementById('clock-newyork').innerText = new Date().toLocaleTimeString('en-GB', { ...opt, timeZone: 'America/New_York' });
            document.getElementById('clock-colombo').innerText = new Date().toLocaleTimeString('en-GB', { ...opt, timeZone: 'Asia/Colombo' });
        }

        function updateSessions() {
            const hr = new Date().getUTCHours();
            const sess = [{n:'London',s:8,e:17}, {n:'New York',s:13,e:22}, {n:'Tokyo',s:0,e:9}];
            document.getElementById('sessions-container').innerHTML = sess.map(s => {
                const open = hr >= s.s && hr < s.e;
                return `<div class="flex items-center justify-between px-5 py-4 rounded-2xl border ${open ? 'bg-amber-500/10 border-amber-500/30 text-amber-400' : 'border-white/5 text-slate-600 opacity-60'}">
                    <span class="text-[10px] font-black uppercase tracking-widest">${s.n}</span>
                    <span class="text-[9px] font-black px-2 py-1 rounded bg-black/40">${open ? 'ACTIVE' : 'OFFLINE'}</span>
                </div>`;
            }).join('');
        }

        document.getElementById('ai-input').addEventListener('keypress', (e) => { if (e.key === 'Enter') askAI(); });

        window.onload = () => {
            resizeCanvas(); animateFireworks(); updateClocks(); updateSessions(); updateCountdown(); render();
            setInterval(updateClocks, 1000); setInterval(updateCountdown, 1000); setInterval(updateSessions, 30000);
            setInterval(createErabadu, 2000); // Spawn flowers
            window.addEventListener('resize', resizeCanvas);
        }
    </script>
</body>
</html>